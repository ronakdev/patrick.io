<DOCTYPE html>
	<!DOCTYPE html>
	<html>
	<head>
		<title></title>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.2/css/bootstrap.min.css" rel="stylesheet" />
		<style>
			@import url('https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed');
			h1,h3 {
				font-family: 'Roboto Condensed', sans-serif;
			},
			body {
				font-family: 'Roboto', sans-serif;
			}
		</style>
	</head>

	<body><br/>
		<div class="container">
  <div class="row">
    <img src="https://i.imgur.com/GX4CEzf.png">
  </div><br/>

  <div class="row">

  <div class="col-12 center">
  	<center>
	<canvas id="smoothie-chart" width = "1000" height="400"></canvas>
</center>
  </div>
  	<button id = "myButton" onclick="myJS()">Click Here</button>
  </div>	
</div>
<br/>
<br/>
<div class="row">
  <div class="col-4 col-md-4">
  	
  	<h3>Step 1</h3>
  	<p>This is what the first part of the procedure is.
  		Lorem ipsum dolor amet mlkshk gluten-free iPhone, hella viral ramps af. Man braid photo booth biodiesel, +1 yuccie hot chicken plaid polaroid tote bag thundercats austin neutra 
  	</p>
  </div>
<div class="col-4 col-md-4">
  	
  	<h3>Step 1</h3>
  	<p>This is what the first part of the procedure is.
  		Lorem ipsum dolor amet mlkshk gluten-free iPhone, hella viral ramps af. Man braid photo booth biodiesel, +1 yuccie hot chicken plaid polaroid tote bag thundercats austin neutra literally. 
  	</p>
  </div>
  <div class="col-4 col-md-4">
  	
  	<h3>Step 1</h3>
  	<p>This is what the first part of the procedure is.
  		Lorem ipsum dolor amet mlkshk gluten-free iPhone, hella viral ramps af. Man braid photo booth biodiesel, +1 yuccie hot chicken plaid polaroid tote bag thundercats austin neutra literally.
  	</p>
  </div>
  


    
  </div>

	</body>


<script src="/socket.io/socket.io.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/smoothie/1.34.0/smoothie.min.js"></script>
	<script>
		var smoothie = new SmoothieChart({grid:{strokeStyle:'#009bff'}}),
	    canvas = document.getElementById('smoothie-chart')


		var EEG1 = new TimeSeries();
		var TopConstant = new TimeSeries();
		var BottomConstant = new TimeSeries();
		let timeElapsed = -1
		let socket = io();
		let baseline = 0 // updated
		let delta = 0 // this is the allowed delta
		let x = 0
		let ave = -1
		function myJS(){
			alert()
			if(x==0){
				print("first time")
				x=1
			}
			print("second time")
		}
		socket.on('eeg-data', function(data){
			// data is broken into time and b1 and b2 (time, temple, forehead respectively)

			/* if (timeElapsed == -1) {
				// this the first time
				timeElapsed = time	
			} else {
				// 99         100    99
				timeElapsed += (time - timeElapsed)
			} */

				if (x==1){
					print("button is clicked second time")
					let temple = data[1]
					let forehead = data[2]
					let ave = ((temple+forehead)/2) 
					let button = document.getElementById("myButton")
					button.style.display == 'block' ;
					x=0;
				}
			
			
				
			console.log(ave)

			

			EEG1.append(new Date().getTime(), (data[1]+data[2])/2)
	    });

		setInterval(function() {
		  // EEG1.append(new Date().getTime(), () => {
		  // 	// do socket magic

		  // 	return 30
		  // });

		  print("in setInterval")
		  if (ave !=-1){
		  	print("average already set")
		  	TopConstant.append(new Date().getTime(), ave + 0.2) ;
		  	BottomConstant.append(new Date().getTime(), ave - 0.2) ;
		  }
		  print("end of setInterval")
		  
		}, 1000);

		smoothie.addTimeSeries(EEG1, {lineWidth:3.4,strokeStyle:'#c2f3ff'});
		smoothie.addTimeSeries(TopConstant, {lineWidth: 3.4, strokeStyle: '#7841e5'}) ;
		smoothie.addTimeSeries(BottomConstant, {lineWidth: 3.4, strokeStyle: '#7841e5'}) ;
		smoothie.streamTo(canvas, 500) ; 

	</script>
</html>	

